{"dependencies":[{"name":"../constants","loc":{"line":3,"column":26}},{"name":"../recursorUtils","loc":{"line":4,"column":30}},{"name":"./object","loc":{"line":5,"column":23}}],"generated":{"js":"'use strict'\n\nconst constants = require('../constants')\nconst recursorUtils = require('../recursorUtils')\nconst object = require('./object')\n\nconst SHALLOW_EQUAL = constants.SHALLOW_EQUAL\nconst UNEQUAL = constants.UNEQUAL\n\nfunction describe (props) {\n  return new DescribedSetValue(Object.assign({\n    size: props.value.size\n  }, props))\n}\nexports.describe = describe\n\nfunction deserialize (state, recursor) {\n  return new DeserializedSetValue(state, recursor)\n}\nexports.deserialize = deserialize\n\nconst tag = Symbol('SetValue')\nexports.tag = tag\n\nclass SetValue extends object.ObjectValue {\n  constructor (props) {\n    super(props)\n    this.size = props.size\n  }\n\n  compare (expected) {\n    const result = super.compare(expected)\n    if (result !== SHALLOW_EQUAL) return result\n\n    return this.size === expected.size\n      ? SHALLOW_EQUAL\n      : UNEQUAL\n  }\n\n  prepareDiff (expected) {\n    // Sets should be compared, even if they have a different number of items.\n    return {compareResult: super.compare(expected)}\n  }\n\n  serialize () {\n    return [this.size, super.serialize()]\n  }\n}\nObject.defineProperty(SetValue.prototype, 'tag', { value: tag })\n\nclass DescribedSetValue extends object.DescribedMixin(SetValue) {\n  createIterableRecursor () {\n    const size = this.size\n    if (size === 0) return recursorUtils.NOOP_RECURSOR\n\n    let index = 0\n    let members\n    const next = () => {\n      if (index === size) return null\n\n      if (!members) {\n        members = Array.from(this.value)\n      }\n\n      const value = members[index]\n      return this.describeItem(index++, this.describeAny(value))\n    }\n\n    return { size, next }\n  }\n}\n\nclass DeserializedSetValue extends object.DeserializedMixin(SetValue) {\n  constructor (state, recursor) {\n    super(state[1], recursor)\n    this.size = state[0]\n  }\n}\n"},"hash":"29fccd13506eb126f97dacb9c09bfc2a"}