{"dependencies":[],"generated":{"js":"'use strict'\n\nconst NOOP_RECURSOR = {\n  size: 0,\n  next () { return null }\n}\nexports.NOOP_RECURSOR = NOOP_RECURSOR\n\nfunction fork (recursor) {\n  const buffer = []\n\n  return {\n    shared () {\n      const next = recursor()\n      if (next !== null) buffer.push(next)\n      return next\n    },\n\n    recursor () {\n      if (buffer.length > 0) return buffer.shift()\n      return recursor()\n    }\n  }\n}\nexports.fork = fork\n\nfunction map (recursor, mapFn) {\n  return () => {\n    const next = recursor()\n    if (next === null) return null\n\n    return mapFn(next)\n  }\n}\nexports.map = map\n\nfunction replay (state, create) {\n  if (!state) {\n    const recursor = create()\n    if (recursor === NOOP_RECURSOR) {\n      state = recursor\n    } else {\n      state = Object.assign({\n        buffer: [],\n        done: false\n      }, recursor)\n    }\n  }\n\n  if (state === NOOP_RECURSOR) return {state, recursor: state}\n\n  let done = false\n  let index = 0\n  const next = () => {\n    if (done) return null\n\n    let retval = state.buffer[index]\n    if (retval === undefined) {\n      retval = state.buffer[index] = state.next()\n    }\n\n    index++\n    if (retval === null) {\n      done = true\n    }\n    return retval\n  }\n\n  return {state, recursor: {next, size: state.size}}\n}\nexports.replay = replay\n\nfunction sequence (first, second) {\n  let fromFirst = true\n  return () => {\n    if (fromFirst) {\n      const next = first()\n      if (next !== null) return next\n\n      fromFirst = false\n    }\n\n    return second()\n  }\n}\nexports.sequence = sequence\n\nfunction singleValue (value) {\n  let done = false\n  return () => {\n    if (done) return null\n\n    done = true\n    return value\n  }\n}\nexports.singleValue = singleValue\n\nfunction unshift (recursor, value) {\n  return () => {\n    if (value !== null) {\n      const next = value\n      value = null\n      return next\n    }\n\n    return recursor()\n  }\n}\nexports.unshift = unshift\n"},"hash":"69e28b5627e220bd81e2bacbc5bf615d"}