{"dependencies":[{"name":"path","loc":{"line":5,"column":22}},{"name":"chalk","loc":{"line":6,"column":23}},{"name":"currently-unhandled","loc":{"line":19,"column":35}},{"name":"is-obj","loc":{"line":20,"column":22}},{"name":"./process-adapter","loc":{"line":22,"column":24}},{"name":"./globals","loc":{"line":23,"column":24}},{"name":"./serialize-error","loc":{"line":28,"column":31}},{"name":"process"}],"generated":{"js":"var process = require(\"process\");\nvar e=require(\"process\");{const r=require(\"path\");require(\"chalk\");if(!(\"function\"==typeof e.send)){r.relative(\".\",e.argv[1]);e.exit(1)}}const r=require(\"currently-unhandled\")(),n=require(\"is-obj\"),t=require(\"./process-adapter\"),o=require(\"./globals\"),a=t.opts;o.options=a;const i=require(\"./serialize-error\");(a.require||[]).forEach(e=>require(e)),t.installSourceMapSupport(),t.installPrecompilerHook();const s=a.file,c=new Set;t.installDependencyTracking(c,s);const u=new Set;let d=null;function l(e){return!!d&&d.attributeLeakedError(e)}exports.setRunner=(e=>{(d=e).on(\"dependency\",e=>{c.add(e)}),d.on(\"touched\",e=>{for(const r of e)u.add(r)})}),require(s),d||t.send(\"no-tests\",{avaRequired:!1});const p=new Set;e.on(\"unhandledRejection\",(e,r)=>{l(e)&&p.add(r)}),e.on(\"uncaughtException\",e=>{if(l(e))return;let r;try{r=i(e)}catch(e){const n=new Error(\"Failed to serialize uncaught exception\");r={avaAssertionError:!1,name:n.name,message:n.message,stack:n.stack}}t.ipcChannel.ref(),t.send(\"uncaughtException\",{exception:r})});let f=!1;e.on(\"ava-teardown\",()=>{if(f)return;f=!0;let e=r().filter(e=>!p.has(e.promise));e.length>0&&(e=e.map(e=>{let r=e.reason;return n(r)&&\"string\"==typeof r.message||(r={message:String(r)}),i(r)}),t.send(\"unhandledRejections\",{rejections:e})),t.send(\"teardown\",{dependencies:Array.from(c),touchedFiles:Array.from(u)})}),e.on(\"ava-exit\",()=>{e.exit(0)});"},"hash":"6117ce9cdaa4802b74f7dd7507995eb8"}