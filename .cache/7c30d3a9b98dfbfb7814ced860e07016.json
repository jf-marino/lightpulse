{"dependencies":[{"name":"rxjs/BehaviorSubject","loc":{"line":11,"column":32}},{"name":"rxjs/add/operator/startWith","loc":{"line":12,"column":8}},{"name":"rxjs/add/operator/do","loc":{"line":13,"column":8}},{"name":"rxjs/add/operator/scan","loc":{"line":14,"column":8}},{"name":"rxjs/add/operator/filter","loc":{"line":15,"column":8}}],"generated":{"js":"\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nexports.__esModule = true;\nvar BehaviorSubject_1 = require(\"rxjs/BehaviorSubject\");\nrequire(\"rxjs/add/operator/startWith\");\nrequire(\"rxjs/add/operator/do\");\nrequire(\"rxjs/add/operator/scan\");\nrequire(\"rxjs/add/operator/filter\");\n/**\n * State\n */\nfunction State(initial) {\n    var local = new BehaviorSubject_1.BehaviorSubject(initial);\n    var updates = new BehaviorSubject_1.BehaviorSubject(null);\n    var getState = function () { return local.asObservable().filter(function (s) { return !!s; }); };\n    var setState = function (change) { return updates.next(change); };\n    updates.filter(function (p) { return !!p; })\n        .scan(function (prev, change) { return (__assign({}, prev, change)); }, initial)[\"do\"](function (latest) { return local.next(latest); })\n        .subscribe();\n    return { getState: getState, setState: setState };\n}\nexports.State = State;\n/**\n * Actions\n */\nfunction Actions(m) {\n    var all = new BehaviorSubject_1.BehaviorSubject(null);\n    var stream = all.asObservable().filter(function (a) { return !!a; });\n    var handlers = Object.keys(m).reduce(function (handlers, key) {\n        return __assign({}, handlers, (_a = {}, _a[key] = function (ev) { return all.next(m[key](ev)); }, _a));\n        var _a;\n    }, {});\n    return { stream: stream, handlers: handlers };\n}\nexports.Actions = Actions;\n"},"hash":"771e62b4c9494f67f2d1cdf7682c23af"}